<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SchoolCode Documentation</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
      line-height: 1.6;
      color: #24292e;
      background-color: #ffffff;
    }

    nav {
      background-color: #f6f8fa;
      border-bottom: 1px solid #e1e4e8;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    nav ul {
      list-style: none;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0;
    }

    nav li {
      margin: 0;
    }

    nav a {
      display: block;
      padding: 16px 24px;
      color: #24292e;
      text-decoration: none;
      transition: background-color 0.2s;
    }

    nav a:hover {
      background-color: #e1e4e8;
    }

    /* Container */
    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    /* Sections */
    section {
      margin-bottom: 60px;
    }

    h2 {
      font-size: 2em;
      border-bottom: 2px solid #eaecef;
      padding-bottom: 0.3em;
      margin-bottom: 1em;
      color: #24292e;
    }

    h3 {
      font-size: 1.5em;
      margin-top: 1.5em;
      margin-bottom: 0.8em;
      color: #24292e;
    }

    h4 {
      font-size: 1.2em;
      margin-top: 1.2em;
      margin-bottom: 0.6em;
      color: #586069;
    }

    /* Code blocks */
    pre {
      background-color: #f6f8fa;
      border: 1px solid #e1e4e8;
      border-radius: 6px;
      padding: 16px;
      overflow-x: auto;
      margin: 16px 0;
    }

    code {
      font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
      font-size: 0.9em;
    }

    pre code {
      font-size: 0.85em;
      line-height: 1.45;
    }

    /* Inline code */
    p code, li code {
      background-color: rgba(27, 31, 35, 0.05);
      padding: 0.2em 0.4em;
      border-radius: 3px;
    }

    /* Links */
    a {
      color: #0366d6;
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    /* Lists */
    ul, ol {
      margin: 16px 0;
      padding-left: 2em;
    }

    li {
      margin: 8px 0;
    }

    /* Info boxes */
    .info-box {
      background-color: #f1f8ff;
      border-left: 4px solid #0366d6;
      padding: 16px;
      margin: 16px 0;
      border-radius: 6px;
    }

    .warning-box {
      background-color: #fff5b1;
      border-left: 4px solid #ffd33d;
      padding: 16px;
      margin: 16px 0;
      border-radius: 6px;
    }

    .success-box {
      background-color: #dcffe4;
      border-left: 4px solid #28a745;
      padding: 16px;
      margin: 16px 0;
      border-radius: 6px;
    }

    /* Feature grid */
    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin: 30px 0;
    }

    .feature-card {
      background-color: #f6f8fa;
      padding: 24px;
      border-radius: 6px;
      border: 1px solid #e1e4e8;
    }

    .feature-card h4 {
      margin-top: 0;
      color: #0366d6;
    }

    /* Command examples */
    .command {
      background-color: #f6f8fa;
      color: #24292e;
      padding: 16px;
      border-radius: 6px;
      margin: 16px 0;
      font-family: "SFMono-Regular", Consolas, monospace;
      border: 1px solid #e1e4e8;
    }

    .command-comment {
      color: #586069;
    }

    /* Architecture diagram */
    .architecture {
      background-color: #f6f8fa;
      border: 1px solid #e1e4e8;
      border-radius: 6px;
      padding: 20px;
      margin: 20px 0;
      font-family: monospace;
      white-space: pre;
      overflow-x: auto;
    }

    /* Table */
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
    }

    th, td {
      text-align: left;
      padding: 12px;
      border: 1px solid #e1e4e8;
    }

    th {
      background-color: #f6f8fa;
      font-weight: 600;
    }

    tr:nth-child(even) {
      background-color: #fafbfc;
    }

    /* Footer */
    footer {
      background-color: #f6f8fa;
      border-top: 1px solid #e1e4e8;
      padding: 40px 20px;
      text-align: center;
      margin-top: 60px;
    }

    footer p {
      color: #586069;
    }

    /* Responsive */
    @media (max-width: 768px) {
      nav ul {
        flex-direction: column;
      }

      nav a {
        border-bottom: 1px solid #e1e4e8;
      }

      .feature-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>

  <nav>
    <ul>
      <li><a href="#overview">Overview</a></li>
      <li><a href="#architecture">Architecture</a></li>
      <li><a href="#security">Security</a></li>
      <li><a href="#installation">Installation</a></li>
      <li><a href="#tools">Tools</a></li>
      <li><a href="#usage">Usage</a></li>
      <li><a href="#troubleshooting">Troubleshooting</a></li>
      <li><a href="https://github.com/luka-loehr/SchoolCode">GitHub</a></li>
    </ul>
  </nav>

  <div class="container">

    <!-- Overview Section -->
    <section id="overview">
      <h2>SchoolCode Overview</h2>

      <p><strong>SchoolCode</strong> is an automated developer tool deployment system for macOS Guest accounts in educational environments. It provides a safe, isolated development environment where students can experiment with programming tools without affecting the host system.</p>

      <div class="info-box">
        <strong>Key Features:</strong>
        <ul style="margin-bottom: 0;">
          <li>‚úÖ <strong>Zero System Impact:</strong> Guest accounts remain completely isolated</li>
          <li>üîí <strong>Security Wrappers:</strong> Prevents dangerous operations for Guest users</li>
          <li>üöÄ <strong>Automatic Setup:</strong> One-command installation and configuration</li>
          <li>üì¶ <strong>Full Tool Suite:</strong> Python, Homebrew, Git, and development tools</li>
          <li>üîÑ <strong>Temporary & Reversible:</strong> All changes reset on Guest logout</li>
        </ul>
      </div>

      <h3>Problem Statement</h3>

      <p>In educational environments, students need access to development tools on shared macOS computers. However, traditional approaches create several problems:</p>

      <ul>
        <li><strong>System Pollution:</strong> Student installations clutter the system</li>
        <li><strong>Security Risks:</strong> Students can accidentally break system tools</li>
        <li><strong>Configuration Conflicts:</strong> Different students' settings interfere</li>
        <li><strong>Administrative Burden:</strong> Constant cleanup and repair required</li>
      </ul>

      <h3>Solution: Guest Account Isolation</h3>

      <p>SchoolCode leverages macOS Guest accounts to create a clean separation:</p>

      <ul>
        <li><strong>Guest Isolation:</strong> Each student session is completely isolated</li>
        <li><strong>Automatic Cleanup:</strong> All changes reset when the student logs out</li>
        <li><strong>Security Boundaries:</strong> System integrity is maintained</li>
        <li><strong>Educational Freedom:</strong> Students can experiment without consequences</li>
      </ul>

      <div class="success-box">
        <strong>Result:</strong> Students get a full development environment while administrators maintain a clean, secure system.
      </div>
    </section>

    <!-- Architecture Section -->
    <section id="architecture">
      <h2>Architecture</h2>

      <p>SchoolCode implements a layered architecture with clear separation between system administration and user isolation.</p>

      <div class="architecture">
SchoolCode/
‚îú‚îÄ‚îÄ schoolcode.sh                       # Main entry point
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ install.sh                      # Core installation engine
‚îÇ   ‚îú‚îÄ‚îÄ schoolcode-cli.sh               # Advanced management CLI
‚îÇ   ‚îú‚îÄ‚îÄ update.sh                       # Update system
‚îÇ   ‚îú‚îÄ‚îÄ uninstall.sh                    # Uninstall system
‚îÇ   ‚îú‚îÄ‚îÄ utils/                          # Utility scripts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logging.sh                  # Centralized logging
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config.sh                   # Configuration
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ monitoring.sh               # System health monitoring
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ homebrew_repair.sh          # Homebrew repairs
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ install_official_python.sh  # Python installation
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ python_utils.sh             # Python management
‚îÇ   ‚îî‚îÄ‚îÄ setup/                          # Guest account setup
‚îÇ       ‚îú‚îÄ‚îÄ guest_login_setup.sh
‚îÇ       ‚îú‚îÄ‚îÄ guest_tools_setup.sh
‚îÇ       ‚îî‚îÄ‚îÄ setup_guest_shell_init.sh
‚îú‚îÄ‚îÄ system_repair.sh                    # System repair utility
‚îú‚îÄ‚îÄ old_mac_compatibility.sh            # Compatibility checker
‚îî‚îÄ‚îÄ tests/                              # Test suite
      </div>

      <h3>Component Overview</h3>

      <div class="feature-grid">
        <div class="feature-card">
          <h4>schoolcode.sh</h4>
          <p><strong>Main Interface</strong></p>
          <p>Unified entry point for all operations. Handles installation, status checking, and uninstallation.</p>
        </div>

        <div class="feature-card">
          <h4>install.sh</h4>
          <p><strong>Installation Engine</strong></p>
          <p>Performs the actual installation of tools, security wrappers, and Guest configuration.</p>
        </div>

        <div class="feature-card">
          <h4>Security Wrappers</h4>
          <p><strong>Access Control</strong></p>
          <p>Bash scripts that wrap dangerous commands and enforce Guest account limitations.</p>
        </div>

        <div class="feature-card">
          <h4>LaunchAgents</h4>
          <p><strong>Auto-Initialization</strong></p>
          <p>macOS LaunchAgents that automatically configure Guest sessions on login.</p>
        </div>
      </div>

      <h3>Installation Flow</h3>

      <ol>
        <li><strong>Compatibility Check:</strong> Validates macOS version, disk space, and system requirements</li>
        <li><strong>System Repair:</strong> Fixes Xcode CLT issues, certificate problems, and PATH configuration</li>
        <li><strong>Tool Installation:</strong> Installs Python (official), Homebrew, Git, and creates security wrappers</li>
        <li><strong>Guest Setup:</strong> Configures LaunchAgents and PATH for automatic Guest session initialization</li>
        <li><strong>Verification:</strong> Tests all installed tools and reports system health</li>
      </ol>

      <h3>Data Flow</h3>

      <p>The system maintains clear data separation:</p>

      <ul>
        <li><strong>System Files:</strong> <code>/opt/schoolcode/</code> (admin-owned, read-only for Guest)</li>
        <li><strong>User Installs:</strong> <code>~/.local/</code> (user-owned, isolated per session)</li>
        <li><strong>Configuration:</strong> <code>/opt/schoolcode/config/</code> (enforces security policies)</li>
        <li><strong>Logs:</strong> <code>/var/log/schoolcode/</code> (system-wide logging)</li>
      </ul>
    </section>

    <!-- Security Section -->
    <section id="security">
      <h2>Security Architecture</h2>

      <div class="success-box">
        <strong>Security Principle:</strong> All Guest user modifications are session-isolated, temporary, and non-destructive. The system maintains full integrity while allowing educational experimentation.
      </div>

      <h3>Security Design</h3>

      <p>SchoolCode implements multiple security layers:</p>

      <h4>1. Guest Account Isolation</h4>
      <ul>
        <li><strong>Session-based:</strong> Each student login creates a fresh, isolated environment</li>
        <li><strong>Temporary:</strong> All changes are automatically removed on logout</li>
        <li><strong>Non-destructive:</strong> System files and configurations remain untouched</li>
      </ul>

      <h4>2. Tool-Specific Security Wrappers</h4>

      <table>
        <thead>
          <tr>
            <th>Tool</th>
            <th>Security Level</th>
            <th>Implementation</th>
            <th>Guest Access</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Python/pip</strong></td>
            <td>üü¢ User Isolation</td>
            <td>Pip config forces <code>--user</code> installs</td>
            <td>Full (user directory only)</td>
          </tr>
          <tr>
            <td><strong>Homebrew</strong></td>
            <td>üî¥ Read-Only</td>
            <td>Blocks all modification commands</td>
            <td>Read-only (list, info, search)</td>
          </tr>
          <tr>
            <td><strong>Git</strong></td>
            <td>üü¢ User Config</td>
            <td>Native user-specific configuration</td>
            <td>Full (user config only)</td>
          </tr>
          <tr>
            <td><strong>sudo</strong></td>
            <td>üî¥ Blocked</td>
            <td>Wrapper prevents sudo for Guest users</td>
            <td>Disabled</td>
          </tr>
        </tbody>
      </table>

      <h3>Security Wrapper Implementation</h3>

      <h4>Homebrew Security Wrapper</h4>
      <div class="command">
<span class="command-comment"># Dangerous commands blocked for Guest users:</span>
brew install     # ‚ùå Blocked
brew uninstall   # ‚ùå Blocked
brew upgrade     # ‚ùå Blocked
brew update      # ‚ùå Blocked
brew tap         # ‚ùå Blocked

<span class="command-comment"># Safe read-only commands allowed:</span>
brew list        # ‚úÖ Allowed
brew info        # ‚úÖ Allowed
brew search      # ‚úÖ Allowed
      </div>

      <h4>Python/Pip Security</h4>
      <div class="command">
<span class="command-comment"># Pip configuration forces user installs:</span>
[global]
user = true
no-warn-script-location = true

<span class="command-comment"># All pip installs go to ~/.local/</span>
pip install requests  # ‚Üí ~/.local/lib/python3.x/site-packages/
      </div>

      <h4>Sudo Blocking</h4>
      <div class="command">
<span class="command-comment"># Sudo wrapper prevents privilege escalation:</span>
Guest$ sudo command  # ‚ùå "sudo is not permitted for Guest users"
Admin$ sudo command  # ‚úÖ Normal sudo behavior
      </div>

      <h3>File System Security</h3>

      <p>SchoolCode maintains strict file system boundaries:</p>

      <table>
        <thead>
          <tr>
            <th>Location</th>
            <th>Owner</th>
            <th>Permissions</th>
            <th>Purpose</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>/opt/schoolcode/</code></td>
            <td>root</td>
            <td>755 (rx for Guest)</td>
            <td>System tools and wrappers</td>
          </tr>
          <tr>
            <td><code>/opt/schoolcode/bin/</code></td>
            <td>root</td>
            <td>755</td>
            <td>Tool symlinks and wrappers</td>
          </tr>
          <tr>
            <td><code>/opt/schoolcode/wrappers/</code></td>
            <td>root</td>
            <td>755</td>
            <td>Security wrapper scripts</td>
          </tr>
          <tr>
            <td><code>/opt/schoolcode/config/</code></td>
            <td>root</td>
            <td>644</td>
            <td>Configuration files</td>
          </tr>
          <tr>
            <td><code>~/.local/</code></td>
            <td>Guest</td>
            <td>755</td>
            <td>User Python packages</td>
          </tr>
        </tbody>
      </table>

      <div class="warning-box">
        <strong>Important:</strong> SchoolCode requires admin privileges for initial installation but ensures Guest users cannot escalate privileges or permanently modify the system.
      </div>
    </section>

    <!-- Installation Section -->
    <section id="installation">
      <h2>Installation</h2>

      <h3>Prerequisites</h3>

      <div class="info-box">
        <strong>System Requirements:</strong>
        <ul style="margin-bottom: 0;">
          <li>macOS 10.14 (Mojave) or newer</li>
          <li>Administrator account access</li>
          <li>At least 5GB free disk space</li>
          <li>Active internet connection</li>
        </ul>
      </div>

      <h3>Installation Process</h3>

      <h4>Step 1: Clone Repository</h4>
      <div class="command">
git clone https://github.com/luka-loehr/SchoolCode.git
cd SchoolCode
      </div>

      <h4>Step 2: Run Installation</h4>
      <div class="command">
sudo ./schoolcode.sh
      </div>

      <p>The installer performs these steps automatically:</p>

      <ol>
        <li><strong>Compatibility Check:</strong> Validates macOS version and system requirements</li>
        <li><strong>System Repair:</strong> Fixes Xcode Command Line Tools and system certificates</li>
        <li><strong>Python Installation:</strong> Downloads and installs official Python 3.12.7</li>
        <li><strong>Homebrew Setup:</strong> Installs Homebrew with security wrappers</li>
        <li><strong>Guest Configuration:</strong> Sets up LaunchAgents for automatic Guest session setup</li>
        <li><strong>Security Wrappers:</strong> Creates command wrappers for Guest account protection</li>
        <li><strong>Verification:</strong> Tests all tools and reports installation status</li>
      </ol>

      <h3>What Gets Installed</h3>

      <div class="feature-grid">
        <div class="feature-card">
          <h4>Official Python 3.12.7</h4>
          <p>Downloaded directly from python.org, installed system-wide, with user-specific pip configuration for Guest isolation.</p>
        </div>

        <div class="feature-card">
          <h4>Homebrew Package Manager</h4>
          <p>Installed with security wrappers that prevent Guest users from modifying the system package database.</p>
        </div>

        <div class="feature-card">
          <h4>Git Version Control</h4>
          <p>Uses Xcode Command Line Tools Git, with user-specific configuration isolation.</p>
        </div>

        <div class="feature-card">
          <h4>Security Wrappers</h4>
          <p>Bash scripts that wrap dangerous commands and enforce Guest account limitations.</p>
        </div>
      </div>

      <h3>Post-Installation</h3>

      <h4>Check Installation Status</h4>
      <div class="command">
sudo ./schoolcode.sh --status
      </div>

      <h4>Test Guest Account</h4>
      <ol>
        <li>Log out of admin account</li>
        <li>Log in as Guest user</li>
        <li>Terminal should automatically open with SchoolCode environment</li>
        <li>Test tools: <code>python3 --version</code>, <code>pip3 install requests</code>, <code>git --version</code></li>
      </ol>

      <h3>Uninstallation</h3>

      <div class="command">
sudo ./schoolcode.sh --uninstall
      </div>

      <p>This removes:</p>
      <ul>
        <li>SchoolCode system files (<code>/opt/schoolcode/</code>)</li>
        <li>LaunchAgents and Guest configuration</li>
        <li>PATH modifications (restored to original state)</li>
      </ul>

      <p><em>Note:</em> Python and Homebrew installations are preserved unless you explicitly uninstall them.</p>
    </section>

    <!-- Tools Section -->
    <section id="tools">
      <h2>Tools & Components</h2>

      <h3>Core Tools</h3>

      <h4>Python Environment</h4>
      <ul>
        <li><strong>Version:</strong> Python 3.12.7 (official from python.org)</li>
        <li><strong>Location:</strong> <code>/Library/Frameworks/Python.framework/</code></li>
        <li><strong>Pip Configuration:</strong> Forces user installs (<code>--user</code> flag)</li>
        <li><strong>Guest Access:</strong> Full Python usage, user-directory-only package installation</li>
      </ul>

      <h4>Homebrew Package Manager</h4>
      <ul>
        <li><strong>Architecture:</strong> Apple Silicon (arm64) or Intel (x86_64) as appropriate</li>
        <li><strong>Location:</strong> <code>/opt/homebrew/</code> (Apple Silicon) or <code>/usr/local/</code> (Intel)</li>
        <li><strong>Guest Restrictions:</strong> Read-only access (list, info, search only)</li>
        <li><strong>Security:</strong> All modification commands blocked via wrapper</li>
      </ul>

      <h4>Git Version Control</h4>
      <ul>
        <li><strong>Source:</strong> Xcode Command Line Tools</li>
        <li><strong>Configuration:</strong> User-specific (<code>~/.gitconfig</code>)</li>
        <li><strong>Guest Access:</strong> Full Git functionality with user config isolation</li>
      </ul>

      <h3>Security Components</h3>

      <h4>Command Wrappers</h4>
      <p>Located in <code>/opt/schoolcode/wrappers/</code>, these scripts intercept and control access to dangerous commands:</p>

      <ul>
        <li><code>brew</code> - Prevents system package modifications</li>
        <li><code>pip</code>/<code>pip3</code> - Forces user-specific installations</li>
        <li><code>sudo</code> - Blocks privilege escalation for Guest users</li>
      </ul>

      <h4>LaunchAgents</h4>
      <p>macOS system integration for automatic Guest session setup:</p>

      <ul>
        <li><strong>Location:</strong> <code>/Library/LaunchAgents/com.schoolcode.guestsetup.plist</code></li>
        <li><strong>Trigger:</strong> Runs at login for Guest user sessions</li>
        <li><strong>Function:</strong> Configures PATH and environment variables</li>
        <li><strong>User Targeting:</strong> Only activates for Guest user logins</li>
      </ul>

      <h3>Utility Scripts</h3>

      <table>
        <thead>
          <tr>
            <th>Script</th>
            <th>Purpose</th>
            <th>Location</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>old_mac_compatibility.sh</code></td>
            <td>System compatibility validation</td>
            <td>Project root</td>
          </tr>
          <tr>
            <td><code>system_repair.sh</code></td>
            <td>Fixes Xcode CLT and system issues</td>
            <td>Project root</td>
          </tr>
          <tr>
            <td><code>guest_setup_auto.sh</code></td>
            <td>Automatic Guest session initialization</td>
            <td><code>scripts/</code></td>
          </tr>
          <tr>
            <td><code>schoolcode-cli.sh</code></td>
            <td>Advanced management CLI</td>
            <td><code>scripts/</code></td>
          </tr>
        </tbody>
      </table>
    </section>

    <!-- Usage Section -->
    <section id="usage">
      <h2>Usage Guide</h2>

      <h3>For System Administrators</h3>

      <h4>Initial Setup</h4>
      <div class="command">
<span class="command-comment"># Install SchoolCode on a macOS system</span>
sudo ./schoolcode.sh

<span class="command-comment"># Check installation status</span>
sudo ./schoolcode.sh --status

<span class="command-comment"># View detailed system health</span>
sudo ./scripts/schoolcode-cli.sh status detailed
      </div>

      <h4>Ongoing Management</h4>
      <div class="command">
<span class="command-comment"># Update SchoolCode system</span>
sudo ./scripts/schoolcode-cli.sh update

<span class="command-comment"># Repair system issues</span>
sudo ./scripts/schoolcode-cli.sh repair

<span class="command-comment"># View system logs</span>
sudo ./scripts/schoolcode-cli.sh logs
      </div>

      <h3>For Students (Guest Users)</h3>

      <h4>Getting Started</h4>
      <ol>
        <li>Log out of any admin account</li>
        <li>Log in as Guest user (no password required)</li>
        <li>Terminal opens automatically with SchoolCode environment</li>
        <li>Start coding with pre-installed tools</li>
      </ol>

      <h4>Available Tools</h4>
      <div class="command">
<span class="command-comment"># Python development</span>
python3 --version
pip3 install requests
python3 -c "print('Hello, World!')"

<span class="command-comment"># Package management (read-only)</span>
brew list
brew info python
brew search git

<span class="command-comment"># Version control</span>
git config --global user.name "Student Name"
git config --global user.email "student@school.edu"
      </div>

      <h4>What Students Can Do</h4>
      <ul>
        <li>‚úÖ Install Python packages (to user directory only)</li>
        <li>‚úÖ Use Git with personal configuration</li>
        <li>‚úÖ Run Python scripts and applications</li>
        <li>‚úÖ Use Homebrew for information (list, search, info)</li>
        <li>‚ùå Modify system packages (blocked by security wrappers)</li>
        <li>‚ùå Use sudo or gain admin privileges (blocked)</li>
      </ul>

      <h3>Session Lifecycle</h3>

      <p>Each Guest session follows this lifecycle:</p>

      <ol>
        <li><strong>Login:</strong> macOS creates fresh Guest account</li>
        <li><strong>LaunchAgent:</strong> <code>com.schoolcode.guestsetup.plist</code> runs automatically</li>
        <li><strong>Environment Setup:</strong> PATH configured, tools initialized</li>
        <li><strong>Student Usage:</strong> Full access to development tools within security boundaries</li>
        <li><strong>Logout:</strong> All changes automatically removed, account reset</li>
      </ol>

      <div class="success-box">
        <strong>Student Experience:</strong> Clean, professional development environment that "just works" without complex setup or system knowledge requirements.
      </div>
    </section>

    <!-- Troubleshooting Section -->
    <section id="troubleshooting">
      <h2>Troubleshooting</h2>

      <h3>Installation Issues</h3>

      <h4>Compatibility Check Fails</h4>
      <div class="command">
<span class="command-comment"># Check detailed compatibility report</span>
./old_mac_compatibility.sh

<span class="command-comment"># Common fixes:</span>
<span class="command-comment"># - Update macOS to 10.14+</span>
<span class="command-comment"># - Free up disk space (need 5GB+)</span>
<span class="command-comment"># - Check internet connection</span>
      </div>

      <h4>Xcode Command Line Tools Issues</h4>
      <div class="command">
<span class="command-comment"># Run system repair</span>
sudo ./scripts/schoolcode-cli.sh repair

<span class="command-comment"># Manual CLT reset if needed</span>
sudo rm -rf /Library/Developer/CommandLineTools
xcode-select --install
      </div>

      <h4>Python Installation Fails</h4>
      <div class="command">
<span class="command-comment"># Check download URL and network</span>
curl -I https://www.python.org/ftp/python/3.12.7/python-3.12.7-macos11.pkg

<span class="command-comment"># Verify installation location</span>
ls -la /Library/Frameworks/Python.framework/Versions/3.12/
      </div>

      <h3>Guest Account Issues</h3>

      <h4>Tools Not Available in Guest Terminal</h4>
      <div class="command">
<span class="command-comment"># Check Guest setup logs</span>
sudo ./scripts/schoolcode-cli.sh logs guest

<span class="command-comment"># Verify LaunchAgent is installed</span>
ls -la /Library/LaunchAgents/com.schoolcode.guestsetup.plist

<span class="command-comment"># Check Guest PATH configuration</span>
echo $PATH
      </div>

      <h4>Security Wrappers Not Working</h4>
      <div class="command">
<span class="command-comment"># Verify wrapper scripts exist</span>
ls -la /opt/schoolcode/wrappers/

<span class="command-comment"># Check wrapper permissions</span>
ls -la /opt/schoolcode/bin/brew

<span class="command-comment"># Test wrapper directly</span>
/opt/schoolcode/bin/brew --version
      </div>

      <h3>Tool-Specific Issues</h3>

      <h4>Pip Installs Failing</h4>
      <div class="command">
<span class="command-comment"># Check pip configuration</span>
cat /opt/schoolcode/config/pip.conf

<span class="command-comment"># Verify user site directory</span>
python3 -c "import site; print(site.USER_SITE)"

<span class="command-comment"># Test user install</span>
pip3 install --user requests
      </div>

      <h4>Homebrew Commands Blocked</h4>
      <div class="command">
<span class="command-comment"># This is expected behavior for Guest users</span>
<span class="command-comment"># Use read-only commands instead:</span>
brew list
brew info python
brew search git
      </div>

      <h3>System Health Monitoring</h3>

      <h4>Check Overall System Status</h4>
      <div class="command">
sudo ./schoolcode.sh --status
      </div>

      <h4>Detailed Health Check</h4>
      <div class="command">
sudo ./scripts/schoolcode-cli.sh status detailed
      </div>

      <h4>Health Check Components</h4>
      <ul>
        <li>‚úÖ <strong>schoolcode_tools:</strong> Core SchoolCode installation</li>
        <li>‚úÖ <strong>guest_setup:</strong> Guest account configuration</li>
        <li>‚úÖ <strong>launchagent:</strong> LaunchAgent installation and loading</li>
        <li>‚úÖ <strong>homebrew:</strong> Homebrew installation and health</li>
        <li>‚úÖ <strong>permissions:</strong> File and directory permissions</li>
        <li>‚úÖ <strong>disk_space:</strong> Available disk space monitoring</li>
      </ul>

      <h3>Log Files</h3>

      <table>
        <thead>
          <tr>
            <th>Log Type</th>
            <th>Location</th>
            <th>Contents</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Main Log</td>
            <td><code>/var/log/schoolcode/schoolcode.log</code></td>
            <td>All SchoolCode operations</td>
          </tr>
          <tr>
            <td>Error Log</td>
            <td><code>/var/log/schoolcode/schoolcode-error.log</code></td>
            <td>Errors and failures only</td>
          </tr>
          <tr>
            <td>Guest Log</td>
            <td><code>/var/log/schoolcode/guest-setup.log</code></td>
            <td>Guest session initialization</td>
          </tr>
          <tr>
            <td>Installation Log</td>
            <td><code>/var/log/schoolcode/install_*.log</code></td>
            <td>Installation history with timestamps</td>
          </tr>
        </tbody>
      </table>

      <h4>Viewing Logs</h4>
      <div class="command">
<span class="command-comment"># View recent logs</span>
sudo ./scripts/schoolcode-cli.sh logs

<span class="command-comment"># View error logs only</span>
sudo ./scripts/schoolcode-cli.sh logs error

<span class="command-comment"># View Guest setup logs</span>
sudo ./scripts/schoolcode-cli.sh logs guest

<span class="command-comment"># View specific installation log</span>
sudo ./scripts/schoolcode-cli.sh logs install
      </div>

      <h3>Getting Help</h3>

      <p>If you encounter issues not covered here:</p>

      <ol>
        <li>Check the <a href="https://github.com/luka-loehr/SchoolCode/issues">GitHub Issues</a> for similar problems</li>
        <li>Include full log output when reporting issues</li>
        <li>Provide system information (<code>sw_vers</code>, <code>uname -a</code>)</li>
        <li>Test on a clean Guest account if possible</li>
      </ol>
    </section>

  </div>

  <footer>
    <p><strong>SchoolCode v3.0.0</strong> - Automated developer tool deployment for macOS Guest accounts</p>
    <p>¬© 2025 Luka L√∂hr | <a href="https://github.com/luka-loehr/SchoolCode">GitHub</a> | Licensed under Apache 2.0</p>
  </footer>

</body>
</html>

